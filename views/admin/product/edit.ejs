<%- include('../aside.ejs')%>
<header>
    <div class=" bg-white py-4 px-10">
        <h2 class=" uppercase text-xl font-semibold">Product</h2>
    </div>
</header>
<main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4">
    <!-- Your content goes here -->
    <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
        <div class=" py-3 px-10 bg-white">
            <div class="flex justify-between items-center pr-20">
                <h2 class="uppercase text-xl font-semibold py-6">Update product</h2>
                <a class="  border-2 border-black rounded-full w-8 h-8 flex justify-center items-center font-bold text-lg hover:bg-gray-100" href="/admin/product"><i class="fa fa-angle-left" aria-hidden="true"></i></a>
            </div>
            <form action="/admin/product/update" method="post" enctype="multipart/form-data">
                <div class="flex gap-2">
                    <div class=" w-1/2 flex flex-col gap-2 py-3">
                        <label for="">Name product</label>
                        <input class=" border px-4 py-2 rounded" type="text" name="name_product" value="<%= product.name_product %>">
                    </div>
                    <div class=" w-1/2 flex flex-col gap-2 py-3">
                        <label for="">Category</label>
                        <select name="id_category" id="" class=" border px-4 py-2 rounded">
                            
                            <% for(let cate of category){ %>
                                <option value="<%= cate.id %>" <%= (cate.id == product.id_category) ? 'selected' : '' %>><%= cate.name_category %></option>
                            <% } %>
                        </select>
                    </div>
                </div>
                <div class="flex gap-2">
                    <div class=" w-1/3 flex flex-col gap-2 py-3">
                        <label for="">Author</label>
                        <input class=" border px-4 py-2 rounded" type="text" name="author" value="<%= product.author %>">
                    </div>
                    <div class=" w-1/3 flex flex-col gap-2 py-3">
                        <label for="">Year</label>
                        <input class=" border px-4 py-2 rounded" type="text" name="year" value="<%= product.year %>">
                    </div>
                    <div class=" w-1/3 flex flex-col gap-2 py-3">
                        <label for="">Price</label>
                        <input class=" border px-4 py-2 rounded" type="text" name="price" value="<%= product.price %>">
                    </div>
                </div>
                
                <div class="flex flex-col gap-2 py-3">
                    <label for="">Description</label>
                    <input class=" border px-4 py-2 rounded" type="text" name="description" value="<%= product.description %>">
                </div>
                <div class="flex flex-col gap-2 py-3">
                    <label for="">Image</label>
                    <input type="file" name="thumb" id="">
                </div>
                <img class="w-[150px]" id="showImg" src="/uploads/<%= product.thumb %>" alt="">
                <div class=" py-6">
                    <input type="submit" value="Update" class=" px-6 py-2 border rounded-md bg-blue-500 text-white font-semibold cursor-pointer hover:bg-blue-400">
                    <input type="hidden" name="thumb_old" value="<%= product.thumb %>">
                    <input type="hidden" name="id" value="<%= product.id %>">
                </div>
            </form>
        </div>
    </div>
</main>
</div>
</div>
<script src="/js/admin/product/edit.js"></script>
<script>
$(document).on('change','input[name="thumb"]',function(e){
    const fileReader = new FileReader()
    fileReader.readAsDataURL(e.target.files[0])
    
    fileReader.onload = function() {
      const url = fileReader.result
      $('#showImg').attr('src',url)
    }
})
</script>
</body>
</html>
